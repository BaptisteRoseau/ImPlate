\hypertarget{blur_8cpp}{}\section{src/blur.cpp File Reference}
\label{blur_8cpp}\index{src/blur.\+cpp@{src/blur.\+cpp}}
{\ttfamily \#include \char`\"{}utils.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}blur.\+h\char`\"{}}\newline
{\ttfamily \#include $<$opencv4/opencv2/opencv.\+hpp$>$}\newline
{\ttfamily \#include $<$opencv4/opencv2/core/mat.\+hpp$>$}\newline
{\ttfamily \#include $<$cstdlib$>$}\newline
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$cstring$>$}\newline
{\ttfamily \#include $<$stack$>$}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{blur_8cpp_a9245625ffaf3f5792f5a7ff12781cf01}{B\+O\+R\+D\+E\+R\+\_\+\+M\+A\+R\+G\+IN}~50
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{blur_8cpp_aef0b451b629b8cc4be3b8d6e14e5560d}{blur\+\_\+pixel} (Mat picture, unsigned int filter\+\_\+size, int i, int j, int k)
\item 
bool \hyperlink{blur_8cpp_a4b1bf782b59e874886bec5c807e97630}{in\+\_\+area} (int i, int j, const vector$<$ Point $>$ \&\hyperlink{main__corner_8cpp_a09dc1a0b5c61500ad117bedf43340c0b}{corners})
\item 
int \hyperlink{blur_8cpp_a5a840e0bd20fadca13ad48a56f32db33}{blur} (const Mat picture, Mat blured, const vector$<$ Point $>$ \&\hyperlink{main__corner_8cpp_a09dc1a0b5c61500ad117bedf43340c0b}{corners}, unsigned int filter\+\_\+size=45)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{blur_8cpp_a9245625ffaf3f5792f5a7ff12781cf01}\label{blur_8cpp_a9245625ffaf3f5792f5a7ff12781cf01}} 
\index{blur.\+cpp@{blur.\+cpp}!B\+O\+R\+D\+E\+R\+\_\+\+M\+A\+R\+G\+IN@{B\+O\+R\+D\+E\+R\+\_\+\+M\+A\+R\+G\+IN}}
\index{B\+O\+R\+D\+E\+R\+\_\+\+M\+A\+R\+G\+IN@{B\+O\+R\+D\+E\+R\+\_\+\+M\+A\+R\+G\+IN}!blur.\+cpp@{blur.\+cpp}}
\subsubsection{\texorpdfstring{B\+O\+R\+D\+E\+R\+\_\+\+M\+A\+R\+G\+IN}{BORDER\_MARGIN}}
{\footnotesize\ttfamily \#define B\+O\+R\+D\+E\+R\+\_\+\+M\+A\+R\+G\+IN~50}



\subsection{Function Documentation}
\mbox{\Hypertarget{blur_8cpp_a5a840e0bd20fadca13ad48a56f32db33}\label{blur_8cpp_a5a840e0bd20fadca13ad48a56f32db33}} 
\index{blur.\+cpp@{blur.\+cpp}!blur@{blur}}
\index{blur@{blur}!blur.\+cpp@{blur.\+cpp}}
\subsubsection{\texorpdfstring{blur()}{blur()}}
{\footnotesize\ttfamily int blur (\begin{DoxyParamCaption}\item[{const Mat}]{picture,  }\item[{Mat}]{blured,  }\item[{const vector$<$ Point $>$ \&}]{corners,  }\item[{unsigned int}]{filter\+\_\+size = {\ttfamily 45} }\end{DoxyParamCaption})}


\begin{DoxyCode}
78                                        \{
79     \textcolor{comment}{// Input verification (don't use assert as you don't want the whole program to stop)}
80     \textcolor{keywordflow}{if} (\hyperlink{main__corner_8cpp_a09dc1a0b5c61500ad117bedf43340c0b}{corners}.size() != 4)\{
81         \hyperlink{utils_8h_ad5cf6896472401b4d1f4250c8ef96e7c}{DISPLAY\_ERR}(\textcolor{stringliteral}{"Invalid corner detection. Skiping picture."});
82         \textcolor{keywordflow}{return} EXIT\_FAILURE;
83     \}
84     \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{int}) filter\_size >= \hyperlink{utils_8h_ad8a68cbc825e50630b93047279a32718}{\_min}(picture.rows, picture.cols))\{
85         \hyperlink{utils_8h_ad5cf6896472401b4d1f4250c8ef96e7c}{DISPLAY\_ERR}(\textcolor{stringliteral}{"Filter size too large for this picture. Skiping picture."});
86         \textcolor{keywordflow}{return} EXIT\_FAILURE;
87     \}
88 
89     \textcolor{comment}{// Getting corners}
90     Point pt\_tl = \hyperlink{main__corner_8cpp_a09dc1a0b5c61500ad117bedf43340c0b}{corners}[0];
91     Point pt\_tr = \hyperlink{main__corner_8cpp_a09dc1a0b5c61500ad117bedf43340c0b}{corners}[1];
92     Point pt\_br = \hyperlink{main__corner_8cpp_a09dc1a0b5c61500ad117bedf43340c0b}{corners}[2];
93     Point pt\_bl = \hyperlink{main__corner_8cpp_a09dc1a0b5c61500ad117bedf43340c0b}{corners}[3];
94     \textcolor{keywordtype}{int} top   = \hyperlink{utils_8h_ad8a68cbc825e50630b93047279a32718}{\_min}(pt\_tl.y, pt\_tr.y);
95     \textcolor{keywordtype}{int} bot   = \hyperlink{utils_8h_a7742fa23cad0b81a56daae0c5ad63c8b}{\_max}(pt\_br.y, pt\_bl.y);
96     \textcolor{keywordtype}{int} left  = \hyperlink{utils_8h_ad8a68cbc825e50630b93047279a32718}{\_min}(pt\_tl.x, pt\_bl.x);
97     \textcolor{keywordtype}{int} right = \hyperlink{utils_8h_a7742fa23cad0b81a56daae0c5ad63c8b}{\_max}(pt\_tr.x, pt\_br.x);
98     \textcolor{keywordflow}{if} (top >= bot || left >= right || bot >= picture.rows || right >= picture.cols)\{
99         \hyperlink{utils_8h_ad5cf6896472401b4d1f4250c8ef96e7c}{DISPLAY\_ERR}(\textcolor{stringliteral}{"Invalid corners."});
100         \textcolor{keywordflow}{return} EXIT\_FAILURE;
101     \}
102 
103     \textcolor{comment}{// Copying picture and blur area}
104     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = top; i < bot; i++)\{
105         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j = left; j < right; j++)\{
106             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} k = 0; k < 3; k++)\{
107                 \textcolor{keywordflow}{if} (\hyperlink{blur_8cpp_a4b1bf782b59e874886bec5c807e97630}{in\_area}(i, j, \hyperlink{main__corner_8cpp_a09dc1a0b5c61500ad117bedf43340c0b}{corners}))\{
108                     \hyperlink{blur_8cpp_aef0b451b629b8cc4be3b8d6e14e5560d}{blur\_pixel}(blured, filter\_size, i, j, k);
109                 \}
110             \}
111         \}
112     \}
113 
114     \textcolor{keywordflow}{return} EXIT\_SUCCESS;
115 \}
\end{DoxyCode}
\mbox{\Hypertarget{blur_8cpp_aef0b451b629b8cc4be3b8d6e14e5560d}\label{blur_8cpp_aef0b451b629b8cc4be3b8d6e14e5560d}} 
\index{blur.\+cpp@{blur.\+cpp}!blur\+\_\+pixel@{blur\+\_\+pixel}}
\index{blur\+\_\+pixel@{blur\+\_\+pixel}!blur.\+cpp@{blur.\+cpp}}
\subsubsection{\texorpdfstring{blur\+\_\+pixel()}{blur\_pixel()}}
{\footnotesize\ttfamily void blur\+\_\+pixel (\begin{DoxyParamCaption}\item[{Mat}]{picture,  }\item[{unsigned int}]{filter\+\_\+size,  }\item[{int}]{i,  }\item[{int}]{j,  }\item[{int}]{k }\end{DoxyParamCaption})}


\begin{DoxyCode}
19                                                                            \{
20     \textcolor{keywordtype}{int} top = \hyperlink{utils_8h_a7742fa23cad0b81a56daae0c5ad63c8b}{\_max}((\textcolor{keywordtype}{int}) (i - filter\_size/2), 0);
21     \textcolor{keywordtype}{int} bot = \hyperlink{utils_8h_ad8a68cbc825e50630b93047279a32718}{\_min}((\textcolor{keywordtype}{int}) (i + filter\_size/2), picture.rows);
22     \textcolor{keywordtype}{int} left = \hyperlink{utils_8h_a7742fa23cad0b81a56daae0c5ad63c8b}{\_max}((\textcolor{keywordtype}{int}) (j - filter\_size/2), 0);
23     \textcolor{keywordtype}{int} right = \hyperlink{utils_8h_ad8a68cbc825e50630b93047279a32718}{\_min}((\textcolor{keywordtype}{int}) (j + filter\_size/2), picture.cols);
24 
25     \textcolor{keywordflow}{if} (bot - top == 0 || right - left == 0)\{
26         \hyperlink{utils_8h_ad5cf6896472401b4d1f4250c8ef96e7c}{DISPLAY\_ERR}(\textcolor{stringliteral}{"Invald corners."});
27         \textcolor{keywordflow}{return};
28     \}
29 
30     \textcolor{comment}{// Getting submatrix for filter calculation}
31     Range r\_x = Range(top, bot);
32     Range r\_y = Range(left, right);
33     Mat submat = picture.operator()(r\_x, r\_y);
34 
35     \textcolor{comment}{// Submatrix sum calculation}
36     Scalar sum\_vector = sum(submat);
37     picture.data[picture.step*i + j*picture.channels() + k]
38         = (\textcolor{keywordtype}{unsigned} char) (sum\_vector[k] / (submat.rows*submat.cols));
39 \}
\end{DoxyCode}
\mbox{\Hypertarget{blur_8cpp_a4b1bf782b59e874886bec5c807e97630}\label{blur_8cpp_a4b1bf782b59e874886bec5c807e97630}} 
\index{blur.\+cpp@{blur.\+cpp}!in\+\_\+area@{in\+\_\+area}}
\index{in\+\_\+area@{in\+\_\+area}!blur.\+cpp@{blur.\+cpp}}
\subsubsection{\texorpdfstring{in\+\_\+area()}{in\_area()}}
{\footnotesize\ttfamily bool in\+\_\+area (\begin{DoxyParamCaption}\item[{int}]{i,  }\item[{int}]{j,  }\item[{const vector$<$ Point $>$ \&}]{corners }\end{DoxyParamCaption})}


\begin{DoxyCode}
41                                                         \{
42     \textcolor{comment}{// j <=> x (col) and i <=> y (row)}
43     Point pt\_tl = \hyperlink{main__corner_8cpp_a09dc1a0b5c61500ad117bedf43340c0b}{corners}[0];
44     Point pt\_tr = \hyperlink{main__corner_8cpp_a09dc1a0b5c61500ad117bedf43340c0b}{corners}[1];
45     Point pt\_br = \hyperlink{main__corner_8cpp_a09dc1a0b5c61500ad117bedf43340c0b}{corners}[2];
46     Point pt\_bl = \hyperlink{main__corner_8cpp_a09dc1a0b5c61500ad117bedf43340c0b}{corners}[3];
47 
48     \textcolor{keywordtype}{double} slope;
49     \textcolor{comment}{// Left Area}
50     slope = ((double)(pt\_tl.x - pt\_bl.x))/(pt\_tl.y - pt\_bl.y);
51     \textcolor{keywordflow}{if} (j < pt\_bl.x + slope*(i - pt\_bl.y))\{
52         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
53     \}
54 
55     \textcolor{comment}{// Top Area}
56     slope = ((double)(pt\_tl.y - pt\_tr.y))/(pt\_tl.x - pt\_tr.x);
57     \textcolor{keywordflow}{if} (i < pt\_tl.y + slope*(j - pt\_tl.x))\{
58         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
59     \}
60 
61     \textcolor{comment}{// Right Area}
62     slope = ((double)(pt\_tr.x - pt\_br.x))/(pt\_tr.y - pt\_br.y);
63     \textcolor{keywordflow}{if} (j > pt\_br.x + slope*(i - pt\_br.y))\{
64         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
65     \}
66 
67     \textcolor{comment}{// Bottom Area}
68     slope = ((double)(pt\_br.y - pt\_bl.y))/(pt\_br.x - pt\_bl.x);
69     \textcolor{keywordflow}{if} (i > pt\_bl.y + slope*(j - pt\_bl.x))\{
70         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
71     \}
72 
73     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
74 \}
\end{DoxyCode}
